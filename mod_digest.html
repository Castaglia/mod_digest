<html>
<head>
<title>ProFTPD module mod_digest</title>
</head>

<body bgcolor=white>

<hr>
<center>
<h2><b>ProFTPD module <code>mod_digest</code></b></h2>
</center>
<hr><br>

The <code>mod_digest</code> module offers functions to calculate the hash value or digest of files. This is particularly useful to verify the integrity of files.
<br><br>
Depending on the file size and the hash function it takes a fair amount of CPU and IO resources to calculate the result. Therefore decide wisely where to enable the features and set the <a href="#DigestMaxSize">DigestMaxSize</a> configuration directive appropriately.
It's also recommended to disable all features within the &lt;Anonymous&gt; context.

<p>
This module was compiled and tested against ProFTPD 1.3.3 Installation
instructions are discussed <a href="#Installation">here</a>.

<p>
The most current version of <code>mod_digest</code> can be found at:
<pre>
  <a href="https://github.com/Castaglia/proftpd-mod_digest/">https://github.com/Castaglia/proftpd-mod_digest</a>
</pre>

<h2>Author</h2>
<p>
Please contact TJ Saunders &lt;tj <i>at</i> castaglia.org&gt; with any
questions, concerns, or suggestions regarding this module.

<h2>Thanks</h2>
<p>
<i>2016-01-09</i>: Thanks to Mathias Berchtold &lt;mb <i>at</i>
smartftp.com&gt; for his original <code>mod_digest</code>, upon which this
version is based.

<h2>Directives</h2>
<ul>
  <li><a href="#DigestAlgorithms">DigestAlgorithms</a>
  <li><a href="#DigestEngine">DigestEngine</a>
  <li><a href="#DigestMaxSize">DigestMaxSize</a>  	
</ul>

<hr>
<h3><a name="DigestAlgorithms">DigestAlgorithms</a></h3>
<strong>Syntax:</strong>DigestAlgorithms <em>["crc32"|"md5"|"sha1"|"sha256"|"all"]</em><br>
<strong>Default:</strong>DigestAlgorithms all<br>
<strong>Context:</strong>server config, &lt;VirtualHost&gt;, &lt;Global&gt;, &lt;Anonymous&gt;<br>
<strong>Module:</strong> mod_digest<br>
<strong>Compatibility:</strong> 1.3.6rc2 or later

<p>
The <code>DigestAlgorithms</code> directive configures the enabled digest
algorithms.  If no <code>DigestAlgorithms</code> directive is configured, then
<b>all</b> supported digest algorithms are enabled. 

<p>
Enabled digest algorithms are announced/discovered via the <code>FEAT</code>
response.

The following algorithms are currently supported by <code>mod_digest</code>:
<ul>
  <li><code>crc32</code> (<i>e.g.</i> for the <code>XCRC</code> command)
  <li><code>md5</code> (<i>e.g.</i> for the <code>XMD5</code> command)
  <li><code>sha1</code> (<i>e.g.</i> for the <code>XSHA1</code> command)
  <li><code>sha256</code> (<i>e.g.</i> for the <code>XSHA256</code> command)
</ul>

<p>
<hr>
<h3><a name="DigestEngine">DigestEngine</a></h3>
<strong>Syntax:</strong>DigestEngine <em>on|off</em><br>
<strong>Default:</strong>DigestEngine on<br>
<strong>Context:</strong>server config, &lt;VirtualHost&gt;, &lt;Global&gt;, &lt;Anonymous&gt;<br>
<strong>Module:</strong> mod_digest<br>
<strong>Compatibility:</strong> 1.3.6rc2 or later

<p>
The <code>DigestEngine</code> directive

<p>
<hr>
<h3><a name="DigestMaxSize">DigestMaxSize</a></h3>
<strong>Syntax:</strong>DigestMaxSize <em>number</em><br>
<strong>Default:</strong>None<br>
<strong>Context:</strong>server config, &lt;VirtualHost&gt;, &lt;Global&gt;, &lt;Anonymous&gt;<br>
<strong>Module:</strong> mod_digest<br>
<strong>Compatibility:</strong> 1.3.6rc2 or later

<p>
The <code>DigestMaxSize</code> directive configures the maximum number of bytes a single hash command is allowed to read from a file.
If the number of bytes to be read from the file is greater than the configured limit the server will return an error.
If no <code>DigestMaxSize</code> directive is configured, then there is no limit. It is stronly recommended to set an upper limit.

<p>
<hr>
<h2><a name="Installation">Installation</a></h2>
To install <code>mod_digest</code>, copy the <code>mod_digest.c</code> file
into:
<pre>
  <i>proftpd-dir</i>/contrib/
</pre>
Unpack the latest proftpd-1.3.<i>x</i> source code, then follow the
usual steps for using third-party modules in proftpd:
<pre>
  $ ./configure --with-modules=mod_digest
  $ make
  $ make install
</pre>

<p>
<hr>
<h2>Usage</h2>
Example Configuration
<pre>
  &lt;IfModule mod_digest.c&gt;
    # Set a limit on file sizes that can be digested
    DigestMaxSize 1GB
  &lt;/IfModule&gt;
</pre>

<p>
<hr><br>

<font size=2><b><i>
&copy; Copyright 2016 TJ Saunders<br>
 All Rights Reserved<br>
</i></b></font>

<hr><br>

</body>
</html>
